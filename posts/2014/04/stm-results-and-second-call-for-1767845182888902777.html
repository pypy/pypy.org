<html><body><p>Hi all,</p>

<p>We now have a preliminary version of <a href="https://pypy.readthedocs.org/en/latest/stm.html#current-status">PyPy-STM
with the JIT</a>, from the new <a href="https://pypy.readthedocs.org/en/latest/stm.html">STM documentation
page.</a>  This PyPy-STM is still not quite useful, failing to top the
performance of a regular PyPy by a small margin on most benchmarks, but
it's definitely getting there :-)  The overheads with the JIT are still
a bit too high.  (I've been tracking an obscure bug since days.
It turned out to be a simple buffer overflow.  But if anybody has
a clue about why a hardware watchpoint in gdb, set on one of the garbled
memory locations, fails to trigger but the memory ends up being modified
anyway... and, it turns out, by just a regular pointer write... ideas
welcome.)</p>

<p>But I go off-topic :-)  The main point of this post is to announce the
<a href="https://pypy.org/tmdonate2.html">2nd Call for Donation about
STM</a>.  We achieved most of the goals laid out in the first call.  We
even largely overachieved them in terms of raw performance, even if
there are many cases that are unreasonably slow for now.  So, after the
successful research, we are launching a second proposal about the
development part of the project:</p>

<ol><li><p>Polish PyPy-STM to get a consistently reasonable speed, 25%-40%
slower than a regular JITted PyPy when running single-threaded code.  Of
course it is supposed to scale nicely as long as there are no
user-visible conflicts.</p>

</li><li><p>Focus on developing the Python-facing interface: both internal things
(e.g. do dictionaries need to be more TM-friendly in general?) as well
as directly visible things (e.g. some profiler-like interface to explore
common conflicts in a program).</p>

</li><li><p>Regular multithreaded code should benefit out of the box, but the
final goal is to explore and tweak some existing non-multithreaded
frameworks and improve their TM-friendliness.  So existing programs
using Twisted or Stackless, for example, should run on multiple cores
without any major change.</p></li></ol>

<p>See the <a href="https://pypy.org/tmdonate2.html">full call</a> for more
details!  I'd like to thank Remi Meier for getting involved.  And a big
thank you to everybody who contributed money on the first call.  It
took more time than anticipated, but it's there in good but rough shape.
Now it needs a lot of polishing :-)</p>

<p>Armin</p></body></html>