<!DOCTYPE html>
<html \ prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Düsseldorf Sprint Report Days 1-3 | PyPy</title>
<link href="../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/styles.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://www.pypy.org/posts/2008/10/dsseldorf-sprint-report-days-1-3-5256639868851086032.html">
<link rel="icon" href="../../../favicon2.ico" sizes="16x16">
<link rel="icon" href="../../../favicon32x32.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../../assets/css/tipuesearch.css">
<meta name="author" content="Carl Friedrich Bolz-Tereick">
<link rel="prev" href="prolog-jit-masters-thesis-finished-5462132148241449867.html" title="Prolog-JIT Master's-Thesis Finished" type="text/html">
<link rel="next" href="sprint-discussions-release-planning-7097053444808236145.html" title="Sprint Discussions: Release Planning" type="text/html">
<meta property="og:site_name" content="PyPy">
<meta property="og:title" content="Düsseldorf Sprint Report Days 1-3">
<meta property="og:url" content="https://www.pypy.org/posts/2008/10/dsseldorf-sprint-report-days-1-3-5256639868851086032.html">
<meta property="og:description" content="The Düsseldorf sprint is currently in full progress and this post will try to
summarize what progress has been made in the last days. We are (again) sprinting
at the STUPS group of the Düsseldorf Univ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2008-10-11T08:11:00Z">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
             <header id="header"><!-- Adapted from https://www.taniarascia.com/responsive-dropdown-navigation-bar --><section class="navigation"><div class="nav-container">
            <div class="brand">
                <a href="../../../index.html">
                    <image id="toplogo" src="../../../images/pypy-logo.svg" width="75px;" alt="PyPy/"></image></a>
            </div>
            <nav><ul class="nav-list">
<li> 
                <a href="#!">Features</a>
                <ul class="nav-dropdown">
<li> <a href="../../../features.html">What is PyPy?</a> </li>  
                    <li> <a href="../../../compat.html">Compatibility</a> </li>  
                    <li> <a href="../../../performance.html">Performance</a> </li>  
                </ul>
</li>
          <li> <a href="../../../download.html">Download</a> </li>  
          <li> <a href="http://doc.pypy.org">Dev Docs</a> </li>  
            <li> 
                <a href="#!">Blog</a>
                <ul class="nav-dropdown">
<li> <a href="../../../blog/">Index</a> </li>  
                    <li> <a href="../../../categories/">Tags</a> </li>  
                    <li> <a href="../../../archive.html">Archive by year</a> </li>  
                    <li> <a href="../../../rss.xml">RSS feed</a> </li>  
                    <li> <a href="https://morepypy.blogspot.com/">Old site</a> </li>  
                </ul>
</li>
            <li> 
                <a href="#!">About</a>
                <ul class="nav-dropdown">
<li> <a href="https://bsky.app/profile/pypyproject.bsky.social">Bluesky</a> </li>  
                    <li> <a href="https://libera.irclog.whitequark.org/pypy">IRC logs</a> </li>  
                    <li> <a href="https://www.youtube.com/playlist?list=PLADqad94yVqDRQXuqxKrPS5QnVqbDLlRt">YouTube</a> </li>  
                    <li> <a href="https://www.twitch.tv/pypyproject">Twitch</a> </li>  
                    <li> <a href="../../../pypy-sponsors.html">Sponsors</a> </li>  
                    <li> <a href="../../../howtohelp.html">How To Help?</a> </li>  
                    <li> <a href="../../../contact.html">Contact</a> </li>  
                </ul>
</li>

                </ul></nav><div class="nav-mobile">
                <a id="nav-toggle" href="#!"> <span></span></a>
            </div>
        </div>
    </section><div class="searchform" role="search">
                
<form class="navbar-form navbar-left" action="../../../search.html" role="search">
    <div class="form-group">
        <input type="text" class="form-control" id="tipue_search_input" name="q" placeholder="Search…" autocomplete="off">
</div>
    <input type="submit" value="Local Search" style="visibility: hidden;">
</form>

            </div>
    </header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><div class="post">
          <header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Düsseldorf Sprint Report Days 1-3</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../../authors/carl-friedrich-bolz-tereick.html">Carl Friedrich Bolz-Tereick</a>
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2008-10-11T08:11:00Z" itemprop="datePublished" title="2008-10-11 08:11">2008-10-11 08:11</time></a>
            </p>
                <p class="commentline">2 comments</p>

                <p class="commentline">            <a href="dsseldorf-sprint-report-days-1-3-5256639868851086032.html#utterances-thread">Comments</a>


            
        </p>
</div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
      <p>The Düsseldorf sprint is currently in full progress and this post will try to
summarize what progress has been made in the last days. We are (again) sprinting
at the <a class="reference" href="https://www.stups.uni-duesseldorf.de">STUPS group</a> of the Düsseldorf University. You can find <a class="reference" href="https://codespeak.net/pypy/extradoc/sprintinfo/october-2008/announcement.html">the sprint
announcement</a> and the <a class="reference" href="https://codespeak.net/pypy/extradoc/sprintinfo/october-2008/planning.txt">daily planning file</a>.</p>
<p>Holger and Samuele put quite some effort over several days into setting up and
improving PyPy's testing infrastructure. PyPy has a variety of tests. On the one
hand, there are of course our own tests. But then we also have the CPython tests
that should be run on top of <tt class="docutils literal"><span class="pre">pypy-c</span></tt>. Up to now we used a custom-made pile of
hacks, held together by lots of duct-tape. It consisted of a variety of
different machines running different things with different reporting solutions.
Some of the old test-results can still be <a class="reference" href="https://wyvern.cs.uni-duesseldorf.de/pypytest/summary-old.html">found on wyvern</a>. Now we are moving
to a buildbot based solution together with a custom reporter to have a view
similar to the old one. Some details are not quite finished yet, but most of the
things are already <a class="reference" href="https://codespeak.net:8099/">working rather well</a> (currently all the results displayed
are from the 2.5-merge branch).</p>
<p>Another large (and ongoing) topic of work is the <a class="reference" href="https://codespeak.net/viewvc/pypy/branch/2.5-merge/">2.5 branch</a>. It contains the
work done by our Summer-of-Code student, <a class="reference" href="https://blog.brunogola.com.br/">Bruno Gola</a>, of adding CPython 2.5
features to PyPy's Python interpreter. While Bruno implemented most language
features and imported the 2.5 stdlib into PyPy, a lot of details were still
missing. In the last days nearly everybody worked on fixing small issues and
failing stdlib tests. While doing that we tried to categorize some CPython tests
as <em>implementation dependant</em> so that we can skip them when running on PyPy.</p>

<h2 id="memory-improvements">Memory Improvements<a href="#memory-improvements" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>One goal of the sprint is to measure and to reduce the memory behaviour of our
Python interpreter. The idea is to make <tt class="docutils literal"><span class="pre">pypy-c</span></tt> a realistic option for use on
embedded devices. By memory behaviour we mean both the
dynamic memory usage (how much bytes does a dict or an instance take) as well as
the size of the executable and details of the GC strategy.</p>
<p>Alexander, Carl Friedrich and Antonio did some work on analyzing the static data
that a <tt class="docutils literal"><span class="pre">pypy-c</span></tt> executable contains. Our executables have the tendency to be
rather large, both due to a lot of code and due to a large amount of static
data. The analysis didn't give any really surprising results, the problem is
mostly that we have a lot of static data originating from a bit everywhere in
our program. Two big offenders are the <tt class="docutils literal"><span class="pre">unicodedata</span></tt>-module with about 750 KB
of static data and the multimethod-tables with about 150 KB of data.</p>
<p>Armin, Iko, Anto and Maciek worked on a new approach to malloc-removal. This is
(for PyPy) a crucial optimization of the translation toolchain that performs
escape analysis to find out which objects don't outlive the frame they were
allocated in. Since RPython is garbage-collected we usually have a lot of
allocations, so it is important to statically get rid of many of them. To
successfully do that, some inlining is needed to give the analysis more context.
This leads to the fact that we have rather aggressive inlining-settings to allow
as much malloc-removal as possible. The new approach tries to inline functions
only if this actually leads to the successful removal of a malloc operation. The
code is not finished quite yet, so it remains to be seen how successful it will
be.</p>
<p>Before the sprint Maciek had started to work on a <a class="reference" href="https://en.wikipedia.org/wiki/Mark-compact_algorithm">mark-compact GC</a> for PyPy. The
idea is that it is better for memory-constrained-environments because it does
not double the memory-requirements during collections. During the sprint Armin
and Maciek worked on cleaning up the code a bit and then merging the branch.
An interesting property of the mark-compact GC is that after a collection all
the memory that is not currently used by the program is returned to the
operating system. Right now the GC is not as fast as our more mature ones, but
it probably will be the basis for future tweaking.</p>
<p>A small thing that was done by Alexander and Carl Friedrich to make objects smaller is
to enable <a class="reference" href="https://codespeak.net/pypy/dist/pypy/doc/interpreter-optimizations.html#sharing-dicts">shared instance dictionaries</a> also for instances of old-style
classes. Before it worked only for instances of new-style classes. Shared
instance dictionaries are a way to reduce the memory-usage of instances. In the
optimal case, it gives the same memory-savings that <tt class="docutils literal"><span class="pre">__slots__</span></tt> are giving,
but without any behavioural changes. Conceptually it is very similar e.g. to
the notion of "map" in the <a class="reference" href="https://en.wikipedia.org/wiki/Self_programming_language">Self project</a>, or the <a class="reference" href="https://code.google.com/apis/v8/design.html#prop_access">hidden classes</a> that Google Chrome's V8
is using (click on the link, there are nice graphics). The
difference is that for them it is mostly a way to get faster attribute access,
and PyPy is so far only using it form memory savings (but that might change in
the future).</p>
<p>In parallel to all the other work, John Witulski worked tirelessly on advancing
the AMD64-JIT-backend. John has the implementation of this backend as the topic
of his Bachelor's thesis. He is progressing quite well (especially also
considering that this is his first sizeable Python project ever), just sometimes
being impaired by such annoyances as errors in the official Intel documentation.
By now the backend is supporting many integer operations and control flow.</p>
      </div>
      <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="prolog-jit-masters-thesis-finished-5462132148241449867.html" rel="prev" title="Prolog-JIT Master's-Thesis Finished">Previous post</a>
            </li>
            <li class="next">
                <a href="sprint-discussions-release-planning-7097053444808236145.html" rel="next" title="Sprint Discussions: Release Planning">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                <div class="comment-level comment-level-1">
      <div class="comment comment-1812930812718902447">
        <div class="comment-header">
          <a name="comment-1812930812718902447"></a>
            <span class="author">René Dudfield</span> wrote on <span class="date">2008-10-12 07:55</span>:
        </div>
        <div class="comment-content">
          <p>Hello,<br><br>sounds like some fun sprinting :)<br><br>Have you considered mmap for some of those big memory users?<br><br>Especially for unicode stuff, which mostly won't be used for many applications, it should be a good win -- both for load time, and memory use.<br><br>Double plus extra combo win!!! for if you use multiple processes.<br><br>cu,</p>
        </div>
      </div>
      <div class="comment comment-7404092177482104060">
        <div class="comment-header">
          <a name="comment-7404092177482104060"></a>
            <span class="author">Unknown</span> wrote on <span class="date">2008-10-21 18:05</span>:
        </div>
        <div class="comment-content">
          <p>I'm not sure of what you mean.<br>But modern operating systems (at least Linux) use on-demand loading of executables and libraries, so they never copy anything from an executable file to memory unless it is used.<br><br>In fact, process startup is implemented internally by mmap()ing the executable and libraries into the address space of the new process.<br><br>If you use multiple processes, it still works well - also data pages are shared, until some process writes to them.<br><br>For MMU-less devices, the above does not apply (and ucLinux allows Linux to run on them).<br>But in that case, I guess that no demand loading is available, and that mmap() copies the mapped data in memory - you need to explicitly swap in and out code segments (i.e. to use good old overlays), and no modern programming environment has direct support for them any more I guess.<br><br>You can still emulate overlays with advanced usage of linker scripts however - you put some code in a section, create variables containing the begin and end offset of that section in the linker script, and copy data in memory from that section; but I think that making relocations to that code work flawlessly is impossible, you need to always refer to the buffer containing loaded data.</p>
        </div>
      </div>
         </div>

          </section>
</div>
    <div class="sidebar">
<div>
  <h2>
    The PyPy blogposts
  </h2>
  <div>
    Create a guest post via a PR to the <a href="https://github.com/pypy/pypy.org">source repo</a>
  </div>
</div>
    <div id="global-recent-posts">
    <h2>
      Recent Posts
    </h2>
    <ul class="post-list">
      <li>
        <a href="/posts/2025/07/pypy-v7320-release.html" class="listtitle">PyPy v7.3.20 release</a>
      </li>
      <li>
        <a href="/posts/2025/06/rpython-gc-allocation-speed.html" class="listtitle">How fast can the RPython GC allocate?</a>
      </li>
      <li>
        <a href="/posts/2025/04/prospero-in-rpython.html" class="listtitle">Doing the Prospero-Challenge in RPython</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-v7319-release.html" class="listtitle">PyPy v7.3.19 release</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-gc-sampling.html" class="listtitle">Low Overhead Allocation Sampling with VMProf in PyPy's GC</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-v7318-release.html" class="listtitle">PyPy v7.3.18 release</a>
      </li>
      <li>
        <a href="/posts/2025/01/musings-tracing.html" class="listtitle">Musings on Tracing in PyPy</a>
      </li>
      <li>
        <a href="/posts/2025/01/towards-pypy311-an-update.html" class="listtitle">Towards PyPy3.11 - an update</a>
      </li>
      <li>
        <a href="/posts/2024/11/guest-post-final-encoding-in-rpython.html" class="listtitle">Guest Post: Final Encoding in RPython Interpreters</a>
      </li>
      <li>
        <a href="/posts/2024/10/jit-peephole-dsl.html" class="listtitle">A DSL for Peephole Transformation Rules of Integer Operations in the PyPy JIT</a>
      </li>
    </ul>
  </div>

          <div id="global-archive-list">
          <h2>
            Archives
          </h2>
          <ul class="archive-level archive-level-1">
            <li><a class="reference" href="/2007/">2007</a> (19)
            </li>
            <li><a class="reference" href="/2008/">2008</a> (62)
            </li>
            <li><a class="reference" href="/2009/">2009</a> (38)
            </li>
            <li><a class="reference" href="/2010/">2010</a> (44)
            </li>
            <li><a class="reference" href="/2011/">2011</a> (43)
            </li>
            <li><a class="reference" href="/2012/">2012</a> (44)
            </li>
            <li><a class="reference" href="/2013/">2013</a> (46)
            </li>
            <li><a class="reference" href="/2014/">2014</a> (22)
            </li>
            <li><a class="reference" href="/2015/">2015</a> (20)
            </li>
            <li><a class="reference" href="/2016/">2016</a> (20)
            </li>
            <li><a class="reference" href="/2017/">2017</a> (13)
            </li>
            <li><a class="reference" href="/2018/">2018</a> (12)
            </li>
            <li><a class="reference" href="/2019/">2019</a> (12)
            </li>
            <li><a class="reference" href="/2020/">2020</a> (9)
            </li>
            <li><a class="reference" href="/2021/">2021</a> (10)
            </li>
            <li><a class="reference" href="/2022/">2022</a> (13)
            </li>
            <li><a class="reference" href="/2023/">2023</a> (6)
            </li>
            <li><a class="reference" href="/2024/">2024</a> (13)
            </li>
            <li><a class="reference" href="/2025/">2025</a> (8)
            </li>
          </ul>
        </div>


          <div id="global-tag-list">
          <h2>
            Tags
          </h2>
          <ul>
            <li><a class="reference" href="/categories/arm.html">arm</a> (2)</li>
            <li><a class="reference" href="/categories/benchmarking.html">benchmarking</a> (1)</li>
            <li><a class="reference" href="/categories/casestudy.html">casestudy</a> (3)</li>
            <li><a class="reference" href="/categories/cli.html">cli</a> (1)</li>
            <li><a class="reference" href="/categories/compiler.html">compiler</a> (1)</li>
            <li><a class="reference" href="/categories/conda-forge.html">conda-forge</a> (1)</li>
            <li><a class="reference" href="/categories/cpyext.html">cpyext</a> (4)</li>
            <li><a class="reference" href="/categories/cpython.html">CPython</a> (3)</li>
            <li><a class="reference" href="/categories/ep2008.html">ep2008</a> (1)</li>
            <li><a class="reference" href="/categories/extension-modules.html">extension modules</a> (3)</li>
            <li><a class="reference" href="/categories/gc.html">gc</a> (3)</li>
            <li><a class="reference" href="/categories/guestpost.html">guestpost</a> (3)</li>
            <li><a class="reference" href="/categories/graalpython.html">GraalPython</a> (1)</li>
            <li><a class="reference" href="/categories/hpy.html">hpy</a> (1)</li>
            <li><a class="reference" href="/categories/heptapod.html">Heptapod</a> (1)</li>
            <li><a class="reference" href="/categories/jit.html">jit</a> (23)</li>
            <li><a class="reference" href="/categories/jython.html">jython</a> (1)</li>
            <li><a class="reference" href="/categories/kcachegrind.html">kcachegrind</a> (1)</li>
            <li><a class="reference" href="/categories/meta.html">meta</a> (1)</li>
            <li><a class="reference" href="/categories/numpy.html">numpy</a> (24)</li>
            <li><a class="reference" href="/categories/parser.html">parser</a> (1)</li>
            <li><a class="reference" href="/categories/performance.html">performance</a> (2)</li>
            <li><a class="reference" href="/categories/profiling.html">profiling</a> (7)</li>
            <li><a class="reference" href="/categories/pypy.html">pypy</a> (6)</li>
            <li><a class="reference" href="/categories/pypy3.html">pypy3</a> (16)</li>
            <li><a class="reference" href="/categories/pyqt4.html">PyQt4</a> (1)</li>
            <li><a class="reference" href="/categories/release.html">release</a> (66)</li>
            <li><a class="reference" href="/categories/releasecffi.html">releasecffi</a> (3)</li>
            <li><a class="reference" href="/categories/releaserevdb.html">releaserevdb</a> (1)</li>
            <li><a class="reference" href="/categories/releasestm.html">releasestm</a> (1)</li>
            <li><a class="reference" href="/categories/revdb.html">revdb</a> (1)</li>
            <li><a class="reference" href="/categories/roadmap.html">roadmap</a> (2)</li>
            <li><a class="reference" href="/categories/rpython.html">rpython</a> (1)</li>
            <li><a class="reference" href="/categories/rpyc.html">RPyC</a> (1)</li>
            <li><a class="reference" href="/categories/speed.html">speed</a> (6)</li>
            <li><a class="reference" href="/categories/sponsors.html">sponsors</a> (7)</li>
            <li><a class="reference" href="/categories/sprint.html">sprint</a> (3)</li>
            <li><a class="reference" href="/categories/sprints.html">sprints</a> (1)</li>
            <li><a class="reference" href="/categories/stm.html">stm</a> (14)</li>
            <li><a class="reference" href="/categories/sun.html">sun</a> (1)</li>
            <li><a class="reference" href="/categories/smalltalk.html">Smalltalk</a> (1)</li>
            <li><a class="reference" href="/categories/squeak.html">Squeak</a> (1)</li>
            <li><a class="reference" href="/categories/testing.html">testing</a> (1)</li>
            <li><a class="reference" href="/categories/toy-optimizer.html">toy-optimizer</a> (5)</li>
            <li><a class="reference" href="/categories/unicode.html">unicode</a> (1)</li>
            <li><a class="reference" href="/categories/valgrind.html">valgrind</a> (1)</li>
            <li><a class="reference" href="/categories/vmprof.html">vmprof</a> (3)</li>
            <li><a class="reference" href="/categories/z3.html">z3</a> (5)</li>
          </ul>
        </div>    </div>
</article></main><footer id="footer"><p>
</p>
<div class="myfooter">
  <div class="logotext">
    © 2025 <a href="mailto:pypy-dev@pypy.org">The PyPy Team</a>
     
    Built with <a href="https://getnikola.com" rel="nofollow">Nikola</a>
     
    Last built 2025-07-07T11:01
  </div>
  <div style="margin-left: auto">
  <a href="../../../rss.xml">RSS feed</a>
</div>

            
        

    </div>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" crossorigin="anonymous"></script><script src="../../../assets/js/styles.js"></script></footer>
</div>
</body>
</html>