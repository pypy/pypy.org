<!DOCTYPE html>
<html \ prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>First results of the JIT | PyPy</title>
<link href="../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/styles.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://www.pypy.org/posts/2009/09/first-results-of-jit-6674537807334018925.html">
<link rel="icon" href="../../../favicon2.ico" sizes="16x16">
<link rel="icon" href="../../../favicon32x32.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../../assets/css/tipuesearch.css">
<meta name="author" content="Armin Rigo">
<link rel="prev" href="pypy-sprint-in-dusseldorf-6-nov-13-nov-8153983964308175836.html" title="PyPy sprint in Düsseldorf, 6 Nov - 13 Nov" type="text/html">
<link rel="next" href="../10/pypys-jit-now-supports-floats-7003493323596806737.html" title="PyPy's JIT now supports floats" type="text/html">
<meta property="og:site_name" content="PyPy">
<meta property="og:title" content="First results of the JIT">
<meta property="og:url" content="https://www.pypy.org/posts/2009/09/first-results-of-jit-6674537807334018925.html">
<meta property="og:description" content="Hi all,

Just a quick note to tell you that we are progressing on the
JIT front.  Here are the running times of the richards
benchmark on my laptop:

8.18 seconds with CPython 2.5.2;

2.61 seconds wit">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2009-09-27T15:51:00Z">
<meta property="article:tag" content="jit">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
             <header id="header"><!-- Adapted from https://www.taniarascia.com/responsive-dropdown-navigation-bar --><section class="navigation"><div class="nav-container">
            <div class="brand">
                <a href="../../../index.html">
                    <image id="toplogo" src="../../../images/pypy-logo.svg" width="75px;" alt="PyPy/"></image></a>
            </div>
            <nav><ul class="nav-list">
<li> 
                <a href="#!">Features</a>
                <ul class="nav-dropdown">
<li> <a href="../../../features.html">What is PyPy?</a> </li>  
                    <li> <a href="../../../compat.html">Compatibility</a> </li>  
                    <li> <a href="../../../performance.html">Performance</a> </li>  
                </ul>
</li>
          <li> <a href="../../../download.html">Download</a> </li>  
          <li> <a href="http://doc.pypy.org">Dev Docs</a> </li>  
            <li> 
                <a href="#!">Blog</a>
                <ul class="nav-dropdown">
<li> <a href="../../../blog/">Index</a> </li>  
                    <li> <a href="../../../categories/">Tags</a> </li>  
                    <li> <a href="../../../archive.html">Archive by year</a> </li>  
                    <li> <a href="../../../rss.xml">RSS feed</a> </li>  
                    <li> <a href="https://morepypy.blogspot.com/">Old site</a> </li>  
                </ul>
</li>
            <li> 
                <a href="#!">About</a>
                <ul class="nav-dropdown">
<li> <a href="https://bsky.app/profile/pypyproject.bsky.social">Bluesky</a> </li>  
                    <li> <a href="https://libera.irclog.whitequark.org/pypy">IRC logs</a> </li>  
                    <li> <a href="https://www.youtube.com/playlist?list=PLADqad94yVqDRQXuqxKrPS5QnVqbDLlRt">YouTube</a> </li>  
                    <li> <a href="https://www.twitch.tv/pypyproject">Twitch</a> </li>  
                    <li> <a href="../../../pypy-sponsors.html">Sponsors</a> </li>  
                    <li> <a href="../../../howtohelp.html">How To Help?</a> </li>  
                    <li> <a href="../../../contact.html">Contact</a> </li>  
                </ul>
</li>

                </ul></nav><div class="nav-mobile">
                <a id="nav-toggle" href="#!"> <span></span></a>
            </div>
        </div>
    </section><div class="searchform" role="search">
                
<form class="navbar-form navbar-left" action="../../../search.html" role="search">
    <div class="form-group">
        <input type="text" class="form-control" id="tipue_search_input" name="q" placeholder="Search…" autocomplete="off">
</div>
    <input type="submit" value="Local Search" style="visibility: hidden;">
</form>

            </div>
    </header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><div class="post">
          <header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">First results of the JIT</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../../authors/armin-rigo.html">Armin Rigo</a>
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2009-09-27T15:51:00Z" itemprop="datePublished" title="2009-09-27 15:51">2009-09-27 15:51</time></a>
            </p>
                <p class="commentline">41 comments</p>

                <p class="commentline">            <a href="first-results-of-jit-6674537807334018925.html#utterances-thread">Comments</a>


            
        </p>
</div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
      <p>Hi all,</p>

<p>Just a quick note to tell you that we are progressing on the
JIT front.  Here are the running times of the <a href="https://codespeak.net/svn/pypy/trunk/pypy/translator/goal/richards.py">richards</a>
benchmark on my laptop:</p>

<ul>
<li>8.18 seconds with CPython 2.5.2;

</li>
<li>2.61 seconds with <code>pypy-c-jit</code> (3x faster than CPython);

</li>
<li>1.04 seconds if you ignore the time spent making assembler (8x faster than CPython);

</li>
<li>1.59 seconds on Psyco, for reference (5x faster that CPython).</li>
</ul>
<p>Yes, as this table shows, we are spending 1.57 seconds in the JIT
support code.  That's too much -- even ridiculously so -- for anything but a
long-running process.  We are working on that :-)</p>

<p>If you want to build your own <code>pypy-c-jit</code> (for x86-32 only for now):</p>

<ul>
<li>you need a Subversion checkout of <a href="https://codespeak.net/svn/pypy/trunk">trunk</a>;

</li>
<li>run <code>pypy/translator/goal/translate.py</code> with the <code>-Ojit</code>
  option;

</li>
<li>as usual, wait a long time (and be sure you have more than 1GB of RAM).</li>
</ul>
<p>For now <code>pypy-c-jit</code> spews a lot of debugging output and
there are a few <a href="https://codespeak.net:8099/summary?category=lib-python">known
examples</a> where it crashes.  As we like to repeat, however, it's a complete JIT:
apart from the crashes (the bugs are probably in the JIT support code), it supports the whole Python language from the start -- in the sense of doing correct things.  Future work include
Python-specific improvements by e.g. tweaking the data structures used to store Python objects so that they are more JIT-friendly.</p>

<p>EDIT: Oh yes, fijal reminds me that CPython 2.6 is 30% faster than CPython 2.5 on this benchmark (which is mostly my "fault", as I extracted a small part of PyPy and submitted it as a patch to CPython that works particularly well for examples like richards).  It does not fundamentally change the fact that we are way faster though.</p>
      </div>
      <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/jit.html" rel="tag">jit</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="pypy-sprint-in-dusseldorf-6-nov-13-nov-8153983964308175836.html" rel="prev" title="PyPy sprint in Düsseldorf, 6 Nov - 13 Nov">Previous post</a>
            </li>
            <li class="next">
                <a href="../10/pypys-jit-now-supports-floats-7003493323596806737.html" rel="next" title="PyPy's JIT now supports floats">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                <div class="comment-level comment-level-1">
      <div class="comment comment-2661085932555851063">
        <div class="comment-header">
          <a name="comment-2661085932555851063"></a>
            <span class="author">Unknown</span> wrote on <span class="date">2009-09-27 17:56</span>:
        </div>
        <div class="comment-content">
          <p>This thing just got interesting.<br><br>Why this particular benchmark?</p>
        </div>
      </div>
      <div class="comment comment-774307470921921571">
        <div class="comment-header">
          <a name="comment-774307470921921571"></a>
            <span class="author">cjrh</span> wrote on <span class="date">2009-09-27 19:32</span>:
        </div>
        <div class="comment-content">
          <p>Fantastic!<br><br>At this point, it would be a really good idea for the pypy team to prepare downloadable binaries or setup tools, or eggs for making it extremely easy for a new user to try it out.  Now that the performance is starting to become interesting, many more people will want to experiment with it and you don't want that enthusiam hampered by a somewhat involved setup process.</p>
        </div>
      </div>
      <div class="comment comment-4153070347449152572">
        <div class="comment-header">
          <a name="comment-4153070347449152572"></a>
            <span class="author">Unknown</span> wrote on <span class="date">2009-09-27 19:40</span>:
        </div>
        <div class="comment-content">
          <p>&gt; it would be a really good idea for the pypy team to prepare downloadable binaries or setup tools, or eggs<br><br>I second this notion.  I am among the group of people who are quite tempted to try things out, but not sure how much work I'll have to do first.</p>
        </div>
      </div>
      <div class="comment comment-3363059865829704237">
        <div class="comment-header">
          <a name="comment-3363059865829704237"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-27 20:27</span>:
        </div>
        <div class="comment-content">
          <p>Me too I'd like pre-built binaries</p>
        </div>
      </div>
      <div class="comment comment-4749002331895472305">
        <div class="comment-header">
          <a name="comment-4749002331895472305"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-27 20:29</span>:
        </div>
        <div class="comment-content">
          <p>I agree. Please put some binaries on your page to make it easier for everyone to survey what you've done!</p>
        </div>
      </div>
      <div class="comment comment-2899568081568642403">
        <div class="comment-header">
          <a name="comment-2899568081568642403"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-09-27 20:30</span>:
        </div>
        <div class="comment-content">
          <p>This particular benchmark happens to be the one we use; there is no deep reason besides its relative simplicity (but it is not a microbenchmark, it's really computing something).  We will of course make more tests with a better range of benchmarks when things start to settle a bit.  Right now we are busy developing, and the numbers change every week.<br><br>It's also for this reason that there is no nicely-packaged release, sorry :-)<br>Note that translating your own pypy-c-jit is not a lot of work for you.  It is just a lot of work for your CPU :-)  You just do "svn co", "cd pypy/translator/goal" and "./translate -Ojit".</p>
        </div>
      </div>
      <div class="comment comment-2986031107577846264">
        <div class="comment-header">
          <a name="comment-2986031107577846264"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-27 20:41</span>:
        </div>
        <div class="comment-content">
          <p>I would appreciate binaries because I don't have a computer with multi-GB RAM. I tried translating pypy a few months ago but gave up after several hours (the computer was just swapping constantly).<br><br>I can wait some longer, but regular binary releases (even if just unstable trunk snapshots) would be useful.<br><br>Anyway, keep up the good work! This is looking really promising.</p>
        </div>
      </div>
      <div class="comment comment-1369991385328788709">
        <div class="comment-header">
          <a name="comment-1369991385328788709"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-28 00:47</span>:
        </div>
        <div class="comment-content">
          <p>Quite nice, thank you..</p>
        </div>
      </div>
      <div class="comment comment-9182530479482682310">
        <div class="comment-header">
          <a name="comment-9182530479482682310"></a>
            <span class="author">PavPanchekha</span> wrote on <span class="date">2009-09-28 03:27</span>:
        </div>
        <div class="comment-content">
          <p>Perhaps there is some way to store generated assembler code? I don't know too much about assembler or the JIT backend, but I assume that it'd be possible to stick the generated assembler code into a comment (or, if those don't exist, a docstring) in the .pyc file, so that a library that is commonly imported won't have to waste time generating assembler.</p>
        </div>
      </div>
      <div class="comment comment-5839330771886414339">
        <div class="comment-header">
          <a name="comment-5839330771886414339"></a>
            <span class="author">Benjamin Peterson</span> wrote on <span class="date">2009-09-28 03:45</span>:
        </div>
        <div class="comment-content">
          <p>@PavPanchekha We specialize the assembler agressively, so that probably wouldn't be so useful. We have a lot of room to improve on assembly generation, though.</p>
        </div>
      </div>
      <div class="comment comment-6207655083120110736">
        <div class="comment-header">
          <a name="comment-6207655083120110736"></a>
            <span class="author">Unknown</span> wrote on <span class="date">2009-09-28 07:09</span>:
        </div>
        <div class="comment-content">
          <p>Thanks for the update!</p>
        </div>
      </div>
      <div class="comment comment-9287719983048019">
        <div class="comment-header">
          <a name="comment-9287719983048019"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-28 11:40</span>:
        </div>
        <div class="comment-content">
          <i>Anonymous said: I would appreciate binaries because I don't have a computer with multi-GB RAM.</i><br><br>I do have such a computer, but I would still appreciate binaries, because the current trunk does not translate for me:<br><br>[translation:ERROR]    File "/tmp/pypy/pypy/annotation/annrpython.py", line 227, in addpendingblock<br>[translation:ERROR]     assert s_oldarg.contains(s_newarg)<br>[translation:ERROR]  AssertionError':<br>[translation:ERROR]  .. v1703 = simple_call((function mmap), v1702, map_size_0, (7), (34), (-1), (0))<br>[translation:ERROR]  .. '(pypy.rlib.rmmap:628)alloc'
        </div>
      </div>
      <div class="comment comment-3341420478425469701">
        <div class="comment-header">
          <a name="comment-3341420478425469701"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-09-28 11:59</span>:
        </div>
        <div class="comment-content">
          <p>You are probably missing a dependency.  See https://codespeak.net/pypy/dist/pypy/doc/getting-started-python.html#translating-the-pypy-python-interpreter</p>
        </div>
      </div>
      <div class="comment comment-774011451353841672">
        <div class="comment-header">
          <a name="comment-774011451353841672"></a>
            <span class="author">della</span> wrote on <span class="date">2009-09-28 13:43</span>:
        </div>
        <div class="comment-content">
          <p>Great work! Is it possible to build the 32-bit binary on a 64-bit machine without too much effort? Having those instructions would certainly help us 64-bit people :)</p>
        </div>
      </div>
      <div class="comment comment-6736246384051372521">
        <div class="comment-header">
          <a name="comment-6736246384051372521"></a>
            <span class="author">Luis</span> wrote on <span class="date">2009-09-28 14:02</span>:
        </div>
        <div class="comment-content">
          <p>I guess the time spent making assembler is only the first time the code is executed. Is that right? If so, we can consider an 8x speedup as the most accurate result. Or not?</p>
        </div>
      </div>
      <div class="comment comment-2017420139753518629">
        <div class="comment-header">
          <a name="comment-2017420139753518629"></a>
            <span class="author">nshepperd</span> wrote on <span class="date">2009-09-28 14:41</span>:
        </div>
        <div class="comment-content">
          <p>@della: I use a 32-bit chroot on my own x64 machine. I don't know if that counts as "too much effort" (certainly it <i>theoretically</i> shouldn't require that), but it has been for me the most painless way to do it.</p>
        </div>
      </div>
      <div class="comment comment-3884561299143425954">
        <div class="comment-header">
          <a name="comment-3884561299143425954"></a>
            <span class="author">Maciej Fijalkowski</span> wrote on <span class="date">2009-09-28 15:16</span>:
        </div>
        <div class="comment-content">
          <p>@Luis: yes, it's only first time.<br>Well, depends how you count, but it<br>can be considered 8x speedup...</p>
        </div>
      </div>
      <div class="comment comment-7442545215133355808">
        <div class="comment-header">
          <a name="comment-7442545215133355808"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-09-28 20:17</span>:
        </div>
        <div class="comment-content">
          <p>Here are prebuilt C sources (in which "tracing" time was reduced by 20-30% since the blog post):<br><br>https://wyvern.cs.uni-duesseldorf.de/~arigo/chain.tar.bz2<br><br>Linux x86-32 only.  You still need a svn checkout of PyPy, and you still need to compile them with gcc -- but it does not take too long: edit the first entry of the Makefile to point to your checkout of PyPy and type "make".  This still assumes that all dependencies have been installed first.  Don't complain if the #includes are at the wrong location for your distribution; you would get them right if you translated the whole thing yourself.  In fact, don't complain if it does not compile for any reason, please :-)  C sources like that are not really supposed to be portable, because they are just intermediates in the translation process.</p>
        </div>
      </div>
      <div class="comment comment-8374144643719708949">
        <div class="comment-header">
          <a name="comment-8374144643719708949"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-28 21:28</span>:
        </div>
        <div class="comment-content">
          <p>̉<i>You are probably missing a dependency. See https://codespeak.net/pypy/dist/pypy/doc/getting-started-python.html#translating-the-pypy-python-interpreter</i><br><br>Dear Armin, it seem like this document should mention libexpat1-dev and libssl-dev as dependencies, too. Anyway, I managed to build pypy-c, and here are the result for some small benchmarks I wrote. (Is there a way here at blogger.com to not break the formatting?)<br><br> python 2.5 psyco pypy-c<br>richards 14.9 2.9 3.9<br>mergesort 27.6 4.8 26.3<br>convexhull 9.4 5.6 6.3<br>bigcityskyline 46.9 3.1 7.6<br>fft 14.1 15.4 25.0<br><br>Thank you all for your efforts.</p>
        </div>
      </div>
      <div class="comment comment-4921870223586788227">
        <div class="comment-header">
          <a name="comment-4921870223586788227"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-09-29 07:47</span>:
        </div>
        <div class="comment-content">
          <p>Thanks for the missing dependencies; added to the development version of the page.  Thanks also for the numbers you report.  The next obvious thing we miss is float support (coming soon!), which shows in some of your benchmarks.</p>
        </div>
      </div>
      <div class="comment comment-1939763976456787311">
        <div class="comment-header">
          <a name="comment-1939763976456787311"></a>
            <span class="author">René Dudfield</span> wrote on <span class="date">2009-09-29 08:06</span>:
        </div>
        <div class="comment-content">
          <p>Hi,<br><br>this is so unbelievably awesome, it's going to take me a while to recover from all the awesomness.<br><br>CONGRATS!<br><br>ps.  a nice improvement for users is to get your ./configure script to find dependencies and report the ones missing, and ones used (s/configure/setup.py/g).</p>
        </div>
      </div>
      <div class="comment comment-4032540969141936567">
        <div class="comment-header">
          <a name="comment-4032540969141936567"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-29 13:09</span>:
        </div>
        <div class="comment-content">
          <p>nice!<br><br>so what is your guess at the moment? how fast can pypy get if you further optimize the jit?</p>
        </div>
      </div>
      <div class="comment comment-2580215521134058731">
        <div class="comment-header">
          <a name="comment-2580215521134058731"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-29 13:47</span>:
        </div>
        <div class="comment-content">
          <p>Dear Pypy developers, is it possible to switch off the very agressive JIT logging in pypy-c? First, this could make pypy-c a drop-in replacement for cpython. (Many more beta-testers.) Second, the logging itself seems to be somewhat resource-intensive.<br><br>Very cool Mandelbrot ascii art, by the way.</p>
        </div>
      </div>
      <div class="comment comment-9117011542732241194">
        <div class="comment-header">
          <a name="comment-9117011542732241194"></a>
            <span class="author">Maciej Fijalkowski</span> wrote on <span class="date">2009-09-30 08:42</span>:
        </div>
        <div class="comment-content">
          <p>Dear anonymous.<br><br>you can compile ./translate.py -Ojit --jit-debug=profile<br><br>There is no runtime switch unfortunately, so far.<br><br>Cheers,<br>fijal</p>
        </div>
      </div>
      <div class="comment comment-4623329441631855945">
        <div class="comment-header">
          <a name="comment-4623329441631855945"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-09-30 10:32</span>:
        </div>
        <div class="comment-content">
          <p>Thank you! For many of us, the translation-time switch will be just as good.</p>
        </div>
      </div>
      <div class="comment comment-1251403096422869379">
        <div class="comment-header">
          <a name="comment-1251403096422869379"></a>
            <span class="author">della</span> wrote on <span class="date">2009-10-01 09:31</span>:
        </div>
        <div class="comment-content">
          <p>I can't seem to compile (32-bit Ubuntu 9.10 chroot), by manually executing the Makefile in /tmp/usession-0/testing_1 I get this traceback:<br><br>  File "/home/della/pkg/pypy/trunk/pypy/translator/c/gcc/trackgcroot.py", line 1210, in (module)<br>    tracker.process(f, g, filename=fn)<br>  File "/home/della/pkg/pypy/trunk/pypy/translator/c/gcc/trackgcroot.py", line 229, in process<br>    lines = self.process_function(lines, entrypoint, filename)<br>  File "/home/della/pkg/pypy/trunk/pypy/translator/c/gcc/trackgcroot.py", line 244, in process_function<br>    table = tracker.computegcmaptable(self.verbose)<br>  File "/home/della/pkg/pypy/trunk/pypy/translator/c/gcc/trackgcroot.py", line 285, in computegcmaptable<br>    self.parse_instructions()<br>  File "/home/della/pkg/pypy/trunk/pypy/translator/c/gcc/trackgcroot.py", line 364, in parse_instructions<br>    meth = self.find_missing_visit_method(opname)<br>  File "/home/della/pkg/pypy/trunk/pypy/translator/c/gcc/trackgcroot.py", line 390, in find_missing_visit_method<br>    raise UnrecognizedOperation(opname)<br>__main__.UnrecognizedOperation: jc<br><br>there are some type warnings also for pointers, I don't know if they could be any useful. Maybe you can help me?</p>
        </div>
      </div>
      <div class="comment comment-2482400478300347369">
        <div class="comment-header">
          <a name="comment-2482400478300347369"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-10-01 16:56</span>:
        </div>
        <div class="comment-content">
          <p>Thanks for the report, della.  Fixed, if you want to try again.  Parsing gcc output is a bit delicate as the exact set of operations used depends on the specific version and command-line options passed to gcc.</p>
        </div>
      </div>
      <div class="comment comment-4251196334710677853">
        <div class="comment-header">
          <a name="comment-4251196334710677853"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-10-01 16:58</span>:
        </div>
        <div class="comment-content">
          <p>Since the blog post, here are the updated numbers: we run richards.py in 2.10 seconds (almost 4x faster than CPython), and only spend 0.916 seconds actually running the assembler (almost 9x faster than CPython).</p>
        </div>
      </div>
      <div class="comment comment-1391273065376798044">
        <div class="comment-header">
          <a name="comment-1391273065376798044"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-10-01 18:25</span>:
        </div>
        <div class="comment-content">
          <p>Very nice. Do you expect to get faster than psyco?</p>
        </div>
      </div>
      <div class="comment comment-2630040160382350983">
        <div class="comment-header">
          <a name="comment-2630040160382350983"></a>
            <span class="author">Luis</span> wrote on <span class="date">2009-10-02 01:27</span>:
        </div>
        <div class="comment-content">
          <p>This is very exciting! Please, try to post updates to these figures... thanks!</p>
        </div>
      </div>
      <div class="comment comment-5470914691964476826">
        <div class="comment-header">
          <a name="comment-5470914691964476826"></a>
            <span class="author">Unhelpful</span> wrote on <span class="date">2009-10-04 01:13</span>:
        </div>
        <div class="comment-content">
          <p>I was having the same problem as della, and your fix seems to work, but it's breaking somewhere else now. I don't think I have a dependency problem, I can build a working pypy-c without jit. Running make manually produces heaps of warnings about incompatible pointers, some probably harmless (int* vs long int*, these should be the same on x86-32), but others worry me more, like struct stat* vs struct stat64*, or struct SSL* vs char**. I put <a href="https://pastie.org/640911" rel="nofollow">the complete output of a manual run of make</a> online.</p>
        </div>
      </div>
      <div class="comment comment-4887155488377702334">
        <div class="comment-header">
          <a name="comment-4887155488377702334"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-10-04 01:40</span>:
        </div>
        <div class="comment-content">
          <p>Interestingly, the translation itself seems to consume at most about 960MB of ram.  It's easy to translate on a system even with only a gig of ram if you stop everything else.<br><br>Try switching run levels or the like.<br><br>The -Ojit option seems to cause an error in translation with Revision 68125, when translated using Python 2.5.2 on Debian Lenny.</p>
        </div>
      </div>
      <div class="comment comment-3910446240337635954">
        <div class="comment-header">
          <a name="comment-3910446240337635954"></a>
            <span class="author">proteusguy</span> wrote on <span class="date">2009-10-04 07:31</span>:
        </div>
        <div class="comment-content">
          <p>First off - congratulations and good job on the great progress. I've been watching this project since the 2007 PyCon in DFW and it's great to see these promising results.<br><br>That said, while I know there's still a lot of work to do and this is very much an in-progress thing, I'm very much looking forward to an excuse to try this stuff out in anger - real practical situations. For me that means some statistical calculation engines (monto-carlo analysis) front ended by web services. In both situations this brings up two constraints: a) must support 64bit (because our data sets rapidly go above 4GB RAM) and b) must not be overly memory hungry (because any significant incremental overhead really hurts when your data sets are already over 4GB RAM).<br><br>For now we use Psyco for small stuff but have to re-implement in C++ once we hit that 32-bit limit. PyPy is very exciting as a practical alternative to Psyco because of anticipated 64bit support. I wonder if, due to the existence fo Psyco already, that PyPy shouldn't focus first on 64bit instead?<br><br>Few things would speed up progress than getting PyPy used out in the wild - even if only by those of us who appreciate it's very much in flux but still understand how to benefit from it.<br><br>I understand you guys have your focus and goals and encourage you to keep up the good work. Just thought I'd throw this out as an idea to consider. I'm sure there are a lot like me anxious to give it a spin.<br><br>  -- Ben Scherrey</p>
        </div>
      </div>
      <div class="comment comment-4616106904288723422">
        <div class="comment-header">
          <a name="comment-4616106904288723422"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-10-04 11:25</span>:
        </div>
        <div class="comment-content">
          <p>Andrew: can you update and try again?  If you still have the .c files around it is enough to go there and type "make"; otherwise, restart the build.  It should still crash, but give us more information about why it does.</p>
        </div>
      </div>
      <div class="comment comment-807172556158006350">
        <div class="comment-header">
          <a name="comment-807172556158006350"></a>
            <span class="author">Unhelpful</span> wrote on <span class="date">2009-10-04 16:04</span>:
        </div>
        <div class="comment-content">
          <p>The new traceback is: <br><br>Traceback (most recent call last):<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 1211, in &lt;module&gt;<br>    assert fn.endswith('.s')<br>AssertionError<br><br>Is the position in input tracked? that might help, or I could package my .gcmap files.</p>
        </div>
      </div>
      <div class="comment comment-2254774604291021998">
        <div class="comment-header">
          <a name="comment-2254774604291021998"></a>
            <span class="author">Unhelpful</span> wrote on <span class="date">2009-10-04 16:15</span>:
        </div>
        <div class="comment-content">
          <p>The trouble seems to be implement.gcmap and implement_9.gcmap. These are bothe empty, and trigger the assertion error.<br><br>Running trackgcroot as the Makefile does, but without those two files, permits compilation to continue, but linking fails with undefined references to various symbols with the prefix 'pypy_g_'.<br><br>I suspected the changes might have invalidated the old .gcmap files, so I tried removing them, and got this when it tried to generate implement.gcmap:<br><br>Traceback (most recent call last):<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 1214, in &lt;module&gt;<br>    tracker.process(f, g, filename=fn)<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 229, in process<br>    lines = self.process_function(lines, entrypoint, filename)<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 244, in process_function<br>    table = tracker.computegcmaptable(self.verbose)<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 285, in computegcmaptable<br>    self.parse_instructions()<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 365, in parse_instructions<br>    insn = meth(line)<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 741, in visit_jmp<br>    self.conditional_jump(line)<br>  File "/home/chshrcat/build/pypy-trunk/pypy/translator/c/gcc/trackgcroot.py", line 757, in conditional_jump<br>    raise UnrecognizedOperation(line)<br>__main__.UnrecognizedOperation:         jmp     T.14141</p>
        </div>
      </div>
      <div class="comment comment-9191799588688464938">
        <div class="comment-header">
          <a name="comment-9191799588688464938"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-10-04 16:19</span>:
        </div>
        <div class="comment-content">
          <p>A correction/clarification to last night's post:<br><br>There isn't a bug in the -Ojit translation process, I was just missing a dependency that I could've sworn I've installed before.<br><br>The translation process only takes &lt; 1GB memory if done without any options.  Attempting to translate with the -Ojit option takes at least 2.5GB of RAM, as I tried last night (with it as the only running process) and it consumed my swapfile and ran out of memory.<br><br>Is there any documented way to use a translated pypy binary to build other pypy translations?  That might help reduce the build requirements, and would also be mighty cool.</p>
        </div>
      </div>
      <div class="comment comment-1127562072268406308">
        <div class="comment-header">
          <a name="comment-1127562072268406308"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-10-04 16:50</span>:
        </div>
        <div class="comment-content">
          <p>NickDaly: checked in, please try.  Also, please come to the mailing list instead of posting here if you have further comments to do...  https://codespeak.net/mailman/listinfo/pypy-dev</p>
        </div>
      </div>
      <div class="comment comment-8185381408147716089">
        <div class="comment-header">
          <a name="comment-8185381408147716089"></a>
            <span class="author">Michael Allman</span> wrote on <span class="date">2009-10-05 10:56</span>:
        </div>
        <div class="comment-content">
          <p>Is pypy-c-jit written in C or Python or something else?  I ask because of the "c" in pypy-c-jit.</p>
        </div>
      </div>
      <div class="comment comment-6428891958292196029">
        <div class="comment-header">
          <a name="comment-6428891958292196029"></a>
            <span class="author">Carl Friedrich Bolz-Tereick</span> wrote on <span class="date">2009-10-05 14:28</span>:
        </div>
        <div class="comment-content">
          <p>Michael: It is written in RPython (a subset of Python) but then translated to C. By convention we therefore call the executable-name pypy-c. If the executable also contains a JIT, we call it pypy-c-jit.</p>
        </div>
      </div>
      <div class="comment comment-3151938066967790171">
        <div class="comment-header">
          <a name="comment-3151938066967790171"></a>
            <span class="author">Carl Friedrich Bolz-Tereick</span> wrote on <span class="date">2009-10-05 15:48</span>:
        </div>
        <div class="comment-content">
          <p>Ben Scherrey: 64bit support might happen not too far in the future. Not using too much memory is a different problem, that might take a while longer. It has two aspects, one is that the JIT itself uses way too much memory at the moment. We will work on that soon.<br><br>The other aspect is making sure that your dataset does not take too much heap. It depends a bit which data structures you use, but it's not likely to be that great right now.  That might change at some point, I have some ideas in that direction, but not really time to work on the soon.</p>
        </div>
      </div>
         </div>

          </section>
</div>
    <div class="sidebar">
<div>
  <h2>
    The PyPy blogposts
  </h2>
  <div>
    Create a guest post via a PR to the <a href="https://github.com/pypy/pypy.org">source repo</a>
  </div>
</div>
    <div id="global-recent-posts">
    <h2>
      Recent Posts
    </h2>
    <ul class="post-list">
      <li>
        <a href="/posts/2025/12/toy-load-store.html" class="listtitle">Load and store forwarding in the Toy Optimizer</a>
      </li>
      <li>
        <a href="/posts/2025/07/pypy-v7320-release.html" class="listtitle">PyPy v7.3.20 release</a>
      </li>
      <li>
        <a href="/posts/2025/06/rpython-gc-allocation-speed.html" class="listtitle">How fast can the RPython GC allocate?</a>
      </li>
      <li>
        <a href="/posts/2025/04/prospero-in-rpython.html" class="listtitle">Doing the Prospero-Challenge in RPython</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-v7319-release.html" class="listtitle">PyPy v7.3.19 release</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-gc-sampling.html" class="listtitle">Low Overhead Allocation Sampling with VMProf in PyPy's GC</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-v7318-release.html" class="listtitle">PyPy v7.3.18 release</a>
      </li>
      <li>
        <a href="/posts/2025/01/musings-tracing.html" class="listtitle">Musings on Tracing in PyPy</a>
      </li>
      <li>
        <a href="/posts/2025/01/towards-pypy311-an-update.html" class="listtitle">Towards PyPy3.11 - an update</a>
      </li>
      <li>
        <a href="/posts/2024/11/guest-post-final-encoding-in-rpython.html" class="listtitle">Guest Post: Final Encoding in RPython Interpreters</a>
      </li>
    </ul>
  </div>

          <div id="global-archive-list">
          <h2>
            Archives
          </h2>
          <ul class="archive-level archive-level-1">
            <li><a class="reference" href="/2007/">2007</a> (19)
            </li>
            <li><a class="reference" href="/2008/">2008</a> (62)
            </li>
            <li><a class="reference" href="/2009/">2009</a> (38)
            </li>
            <li><a class="reference" href="/2010/">2010</a> (44)
            </li>
            <li><a class="reference" href="/2011/">2011</a> (43)
            </li>
            <li><a class="reference" href="/2012/">2012</a> (44)
            </li>
            <li><a class="reference" href="/2013/">2013</a> (46)
            </li>
            <li><a class="reference" href="/2014/">2014</a> (22)
            </li>
            <li><a class="reference" href="/2015/">2015</a> (20)
            </li>
            <li><a class="reference" href="/2016/">2016</a> (20)
            </li>
            <li><a class="reference" href="/2017/">2017</a> (13)
            </li>
            <li><a class="reference" href="/2018/">2018</a> (12)
            </li>
            <li><a class="reference" href="/2019/">2019</a> (12)
            </li>
            <li><a class="reference" href="/2020/">2020</a> (9)
            </li>
            <li><a class="reference" href="/2021/">2021</a> (10)
            </li>
            <li><a class="reference" href="/2022/">2022</a> (13)
            </li>
            <li><a class="reference" href="/2023/">2023</a> (6)
            </li>
            <li><a class="reference" href="/2024/">2024</a> (13)
            </li>
            <li><a class="reference" href="/2025/">2025</a> (9)
            </li>
          </ul>
        </div>


          <div id="global-tag-list">
          <h2>
            Tags
          </h2>
          <ul>
            <li><a class="reference" href="/categories/arm.html">arm</a> (2)</li>
            <li><a class="reference" href="/categories/benchmarking.html">benchmarking</a> (1)</li>
            <li><a class="reference" href="/categories/casestudy.html">casestudy</a> (3)</li>
            <li><a class="reference" href="/categories/cli.html">cli</a> (1)</li>
            <li><a class="reference" href="/categories/compiler.html">compiler</a> (1)</li>
            <li><a class="reference" href="/categories/conda-forge.html">conda-forge</a> (1)</li>
            <li><a class="reference" href="/categories/cpyext.html">cpyext</a> (4)</li>
            <li><a class="reference" href="/categories/cpython.html">CPython</a> (3)</li>
            <li><a class="reference" href="/categories/ep2008.html">ep2008</a> (1)</li>
            <li><a class="reference" href="/categories/extension-modules.html">extension modules</a> (3)</li>
            <li><a class="reference" href="/categories/gc.html">gc</a> (3)</li>
            <li><a class="reference" href="/categories/guestpost.html">guestpost</a> (3)</li>
            <li><a class="reference" href="/categories/graalpython.html">GraalPython</a> (1)</li>
            <li><a class="reference" href="/categories/hpy.html">hpy</a> (1)</li>
            <li><a class="reference" href="/categories/heptapod.html">Heptapod</a> (1)</li>
            <li><a class="reference" href="/categories/jit.html">jit</a> (23)</li>
            <li><a class="reference" href="/categories/jython.html">jython</a> (1)</li>
            <li><a class="reference" href="/categories/kcachegrind.html">kcachegrind</a> (1)</li>
            <li><a class="reference" href="/categories/meta.html">meta</a> (1)</li>
            <li><a class="reference" href="/categories/numpy.html">numpy</a> (24)</li>
            <li><a class="reference" href="/categories/parser.html">parser</a> (1)</li>
            <li><a class="reference" href="/categories/performance.html">performance</a> (2)</li>
            <li><a class="reference" href="/categories/profiling.html">profiling</a> (7)</li>
            <li><a class="reference" href="/categories/pypy.html">pypy</a> (6)</li>
            <li><a class="reference" href="/categories/pypy3.html">pypy3</a> (16)</li>
            <li><a class="reference" href="/categories/pyqt4.html">PyQt4</a> (1)</li>
            <li><a class="reference" href="/categories/release.html">release</a> (66)</li>
            <li><a class="reference" href="/categories/releasecffi.html">releasecffi</a> (3)</li>
            <li><a class="reference" href="/categories/releaserevdb.html">releaserevdb</a> (1)</li>
            <li><a class="reference" href="/categories/releasestm.html">releasestm</a> (1)</li>
            <li><a class="reference" href="/categories/revdb.html">revdb</a> (1)</li>
            <li><a class="reference" href="/categories/roadmap.html">roadmap</a> (2)</li>
            <li><a class="reference" href="/categories/rpython.html">rpython</a> (1)</li>
            <li><a class="reference" href="/categories/rpyc.html">RPyC</a> (1)</li>
            <li><a class="reference" href="/categories/speed.html">speed</a> (6)</li>
            <li><a class="reference" href="/categories/sponsors.html">sponsors</a> (7)</li>
            <li><a class="reference" href="/categories/sprint.html">sprint</a> (3)</li>
            <li><a class="reference" href="/categories/sprints.html">sprints</a> (1)</li>
            <li><a class="reference" href="/categories/stm.html">stm</a> (14)</li>
            <li><a class="reference" href="/categories/sun.html">sun</a> (1)</li>
            <li><a class="reference" href="/categories/smalltalk.html">Smalltalk</a> (1)</li>
            <li><a class="reference" href="/categories/squeak.html">Squeak</a> (1)</li>
            <li><a class="reference" href="/categories/testing.html">testing</a> (1)</li>
            <li><a class="reference" href="/categories/toy-optimizer.html">toy-optimizer</a> (6)</li>
            <li><a class="reference" href="/categories/unicode.html">unicode</a> (1)</li>
            <li><a class="reference" href="/categories/valgrind.html">valgrind</a> (1)</li>
            <li><a class="reference" href="/categories/vmprof.html">vmprof</a> (3)</li>
            <li><a class="reference" href="/categories/z3.html">z3</a> (5)</li>
          </ul>
        </div>    </div>
</article></main><footer id="footer"><p>
</p>
<div class="myfooter">
  <div class="logotext">
    © 2026 <a href="mailto:pypy-dev@pypy.org">The PyPy Team</a>
     
    Built with <a href="https://getnikola.com" rel="nofollow">Nikola</a>
     
    Last built 2026-01-17T00:22
  </div>
  <div style="margin-left: auto">
  <a href="../../../rss.xml">RSS feed</a>
</div>

            
        

    </div>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" crossorigin="anonymous"></script><script src="../../../assets/js/styles.js"></script></footer>
</div>
</body>
</html>