<html><body><p>At the end of February ten of us gathered in Leysin, Switzerland to work on<br>
a variety of topics including <a class="reference external" href="https://github.com/pyhandle/hpy/">HPy</a>, <a class="reference external" href="https://buildbot.pypy.org/summary?branch=py3.7">PyPy Python 3.7</a> support and the PyPy<br>
migration to <a class="reference external" href="https://foss.heptapod.net/pypy/">Heptapod</a>.<br>
<br>
</p><div class="separator" style="clear: both; text-align: center;">
<a href="https://1.bp.blogspot.com/-PIs_hVhn3RY/XnFDceuihNI/AAAAAAAAbRg/LKMOMWxeFw4jhcwqy8jx7iKzKE01fbfxQCEwYBhgL/s1600/2020_leysin_sprint_attendees.jpg" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="180" src="https://1.bp.blogspot.com/-PIs_hVhn3RY/XnFDceuihNI/AAAAAAAAbRg/LKMOMWxeFw4jhcwqy8jx7iKzKE01fbfxQCEwYBhgL/s320/2020_leysin_sprint_attendees.jpg" width="320"></a></div>
<br>
We had a fun and productive week. The snow was beautiful. There was skiing<br>
and lunch at the top of <a class="reference external" href="https://en.wikipedia.org/wiki/Berneuse">Berneuse</a>, cooking together, some late nights at<br>
the pub next door, some even later nights coding, and of course the<br>
obligatory cheese fondue outing.<br>
<br>
There were a few of us participating in a PyPy sprint for the first time<br>
and a few familiar faces who had attended many sprints. Many different<br>
projects were represented including PyPy, <a class="reference external" href="https://github.com/pyhandle/hpy/">HPy</a>, <a class="reference external" href="https://github.com/graalvm/graalpython">GraalPython</a>,<br>
<a class="reference external" href="https://foss.heptapod.net/pypy/">Heptapod</a>, and <a class="reference external" href="https://github.com/dgrunwald/rust-cpython">rust-cpython</a>. The atmosphere was relaxed and welcoming, so if<br>
you're thinking of attending the next one -- please do!<br>
<br>
Topics worked on:<br>
<br>
<h2>
HPy</h2>
HPy is a new project to design and implement a better API for extending<br>
Python in C. If you're unfamiliar with it you can read more about it at<br>
<a class="reference external" href="https://github.com/pyhandle/hpy/">HPy</a>.<br>
<br>
A lot of attention was devoted to the Big HPy Design Discussion which<br>
took up two full mornings. So much was decided that this will likely<br>
get its own detailed write-up, but bigger topics included:<br>
<ul class="simple">
<li>the HPy GetAttr, SetAttr, GetItem and SetItem methods,</li>
<li>HPy_FromVoidP and HPy_AsVoidP for passing HPy handles to C functions<br>
that pass void* pointers to callbacks,</li>
<li>avoiding having va_args as part of the ABI,</li>
<li>exception handling,</li>
<li>support for creating custom types.</li>
</ul>
Quite a few things got worked on too:<br>
<ul class="simple">
<li>implemented support for writing methods that take keyword arguments with<br>
HPy_METH_KEYWORDS,</li>
<li>implemented HPy_GetAttr, HPy_SetAttr, HPy_GetItem, and HPy_SetItem,</li>
<li>started implementing support for adding custom types,</li>
<li>started implementing dumping JSON objects in ultrajson-hpy,</li>
<li>refactored the PyPy GIL to improve the interaction between HPy and<br>
PyPy's cpyext,</li>
<li>experimented with adding HPy support to rust-cpython.</li>
</ul>
And there was some discussion of the next steps of the HPy initiative<br>
including writing documentation, setting up websites and funding, and<br>
possibly organising another HPy gathering later in the year.<br>
<br>
<h2>
PyPy</h2>
<ul class="simple">
<li>Georges gave a presentation on the Heptapod topic and branch workflows<br>
and showed everyone how to use hg-evolve.</li>
<li>Work was done on improving the PyPy CI buildbot post the move to<br>
heptapod, including a light-weight pre-merge CI and restricting<br>
when the full CI is run to only branch commits.</li>
<li>A lot of work was done improving the -D tests. </li>
</ul>
<br>
<h2>
Miscellaneous</h2>
<ul class="simple">
<li>Armin demoed VRSketch and NaN Industries in VR, including an implementation<br>
of the Game of Life within NaN Industries!</li>
<li>Skiing!</li>
</ul>
<br>
<h2>
Aftermath</h2>
Immediately after the sprint large parts of Europe and the world were<br>
hit by the COVID-19 epidemic. It was good to spend time together before<br>
travelling ceased to be a sensible idea and many gatherings were cancelled.<br>
<br>
Keep safe out there everyone.<br>
<br>
The HPy &amp; PyPy Team &amp; Friends<br>
<br>
<i>In joke for those who attended the sprint: Please don't replace this blog post<br>
with its Swedish translation (or indeed a translation to any other language :).</i></body></html>