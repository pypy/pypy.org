<!DOCTYPE html>
<html \ prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PyPy v7.1 released; now uses utf-8 internally for unicode strings | PyPy</title>
<link href="../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/styles.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://www.pypy.org/posts/2019/03/pypy-v71-released-now-uses-utf-8-451324088028792912.html">
<link rel="icon" href="../../../favicon2.ico" sizes="16x16">
<link rel="icon" href="../../../favicon32x32.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../../assets/css/tipuesearch.css">
<meta name="author" content="mattip">
<link rel="prev" href="../02/pypy-v700-triple-release-of-27-35-and-606875333356156076.html" title="PyPy v7.0.0: triple release of 2.7, 3.5 and 3.6-alpha" type="text/html">
<link rel="next" href="../04/an-rpython-jit-for-lpegs-4779548053359386284.html" title="An RPython JIT for LPegs" type="text/html">
<meta property="og:site_name" content="PyPy">
<meta property="og:title" content="PyPy v7.1 released; now uses utf-8 internally for unicode strings">
<meta property="og:url" content="https://www.pypy.org/posts/2019/03/pypy-v71-released-now-uses-utf-8-451324088028792912.html">
<meta property="og:description" content="The PyPy team is proud to release version 7.1.0 of PyPy, which includes
two different interpreters:




PyPy2.7, which is an interpreter supporting the syntax and the features of
Python 2.7
PyPy3.6-be">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-03-24T19:14:00Z">
<meta property="article:tag" content="release">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
             <header id="header"><!-- Adapted from https://www.taniarascia.com/responsive-dropdown-navigation-bar --><section class="navigation"><div class="nav-container">
            <div class="brand">
                <a href="../../../index.html">
                    <image id="toplogo" src="../../../images/pypy-logo.svg" width="75px;" alt="PyPy/"></image></a>
            </div>
            <nav><ul class="nav-list">
<li> 
                <a href="#!">Features</a>
                <ul class="nav-dropdown">
<li> <a href="../../../features.html">What is PyPy?</a> </li>  
                    <li> <a href="../../../compat.html">Compatibility</a> </li>  
                    <li> <a href="../../../performance.html">Performance</a> </li>  
                </ul>
</li>
          <li> <a href="../../../download.html">Download</a> </li>  
          <li> <a href="http://doc.pypy.org">Dev Docs</a> </li>  
            <li> 
                <a href="#!">Blog</a>
                <ul class="nav-dropdown">
<li> <a href="../../../blog/">Index</a> </li>  
                    <li> <a href="../../../categories/">Tags</a> </li>  
                    <li> <a href="../../../archive.html">Archive by year</a> </li>  
                    <li> <a href="../../../rss.xml">RSS feed</a> </li>  
                    <li> <a href="https://morepypy.blogspot.com/">Old site</a> </li>  
                </ul>
</li>
            <li> 
                <a href="#!">About</a>
                <ul class="nav-dropdown">
<li> <a href="https://bsky.app/profile/pypyproject.bsky.social">Bluesky</a> </li>  
                    <li> <a href="https://libera.irclog.whitequark.org/pypy">IRC logs</a> </li>  
                    <li> <a href="https://www.youtube.com/playlist?list=PLADqad94yVqDRQXuqxKrPS5QnVqbDLlRt">YouTube</a> </li>  
                    <li> <a href="https://www.twitch.tv/pypyproject">Twitch</a> </li>  
                    <li> <a href="../../../pypy-sponsors.html">Sponsors</a> </li>  
                    <li> <a href="../../../howtohelp.html">How To Help?</a> </li>  
                    <li> <a href="../../../contact.html">Contact</a> </li>  
                </ul>
</li>

                </ul></nav><div class="nav-mobile">
                <a id="nav-toggle" href="#!"> <span></span></a>
            </div>
        </div>
    </section><div class="searchform" role="search">
                
<form class="navbar-form navbar-left" action="../../../search.html" role="search">
    <div class="form-group">
        <input type="text" class="form-control" id="tipue_search_input" name="q" placeholder="Search…" autocomplete="off">
</div>
    <input type="submit" value="Local Search" style="visibility: hidden;">
</form>

            </div>
    </header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><div class="post">
          <header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">PyPy v7.1 released; now uses utf-8 internally for unicode strings</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    <a class="u-url" href="../../../authors/mattip.html">mattip</a>
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2019-03-24T19:14:00Z" itemprop="datePublished" title="2019-03-24 19:14">2019-03-24 19:14</time></a>
            </p>
                <p class="commentline">9 comments</p>

                <p class="commentline">            <a href="pypy-v71-released-now-uses-utf-8-451324088028792912.html#utterances-thread">Comments</a>


            
        </p>
</div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
      <div dir="ltr" style="text-align: left;">
The PyPy team is proud to release version 7.1.0 of PyPy, which includes
two different interpreters:<br><blockquote>
<div>
<ul class="simple">
<li>PyPy2.7, which is an interpreter supporting the syntax and the features of
Python 2.7</li>
<li>PyPy3.6-beta: this is the second official release of PyPy to support 3.6
features, although it is still considered beta quality.</li>
</ul>
</div>
</blockquote>
The interpreters are based on much the same codebase, thus the double
release.<br><br>
This release, coming fast on the heels of 7.0 in February, finally merges the
internal refactoring of unicode representation as UTF-8. Removing the
conversions from strings to unicode internally lead to a nice speed bump. We merged the utf-8 changes to the py3.5 branch (Python3.5.3) but will concentrate on 3.6 going forward.<br><br>
We also improved the ability to use the buffer protocol with ctype structures
and arrays.<br><br>
The <a class="reference external" href="https://cffi.readthedocs.io/">CFFI</a> backend has been updated to version 1.12.2. We recommend using CFFI
rather than c-extensions to interact with C, and <a class="reference external" href="https://cppyy.readthedocs.io/">cppyy</a> for interacting with
C++ code.<br>
 You can download the v7.1 releases here:<br><blockquote>
<div>
<a class="reference external" href="https://pypy.org/download.html">https://pypy.org/download.html</a>
</div>
</blockquote>
We would like to thank our donors for the continued support of the PyPy
project. If PyPy is not quite good enough for your needs, we are available for
direct consulting work.<br><br>
We would also like to thank our contributors and encourage new people to join
the project. PyPy has many layers and we need help with all of them: <a class="reference external" href="https://doc.pypy.org/en/latest/index.html">PyPy</a>
and <a class="reference external" href="https://rpython.readthedocs.org/">RPython</a> documentation improvements, tweaking popular modules to run
on pypy, or general <a class="reference external" href="https://doc.pypy.org/en/latest/project-ideas.html">help</a> with making RPython’s JIT even better.<br><div class="section" id="what-is-pypy">
<h2 style="text-align: center;">
<span style="font-size: x-large;">What is PyPy?</span>
<a href="#what-is-pypy" class="headerlink" title="Permalink to this heading">¶</a></h2>
PyPy is a very compliant Python interpreter, almost a drop-in replacement for
CPython 2.7, 3.6. It’s fast (<a class="reference external" href="https://speed.pypy.org/">PyPy and CPython 2.7.x</a> performance
comparison) due to its integrated tracing JIT compiler.<br><br>
We also welcome developers of other <a class="reference external" href="https://rpython.readthedocs.io/en/latest/examples.html">dynamic languages</a> to see what RPython
can do for them.<br>

This PyPy release supports:<br><strong> </strong>
</div>
<div class="section" id="what-is-pypy">
<ul class="simple">
<li>
<strong>x86</strong> machines on most common operating systems
(Linux 32/64 bits, Mac OS X 64 bits, Windows 32 bits, OpenBSD, FreeBSD)</li>
<li>big- and little-endian variants of <strong>PPC64</strong> running Linux</li>
<li> <b>ARM32 </b>although we do not supply downloadable binaries at this time</li>
<li>
<strong>s390x</strong> running Linux</li>
</ul>
<div class="section" id="changelog">
<h2 style="text-align: center;">
<span style="font-size: x-large;">What else is new?</span>
<a href="#changelog" class="headerlink" title="Permalink to this heading">¶</a></h2>
PyPy 7.0 was released in February, 2019.
There are many incremental improvements to RPython and PyPy, for more information see the <a class="reference external" href="https://doc.pypy.org/en/latest/release-v7.1.0.html#changelog">changelog</a>.<br><br>
Please update, and continue to help us make PyPy better.<br><br><br>
Cheers, The PyPy team
</div>
<br>
</div>
</div>
      </div>
      <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/release.html" rel="tag">release</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../02/pypy-v700-triple-release-of-27-35-and-606875333356156076.html" rel="prev" title="PyPy v7.0.0: triple release of 2.7, 3.5 and 3.6-alpha">Previous post</a>
            </li>
            <li class="next">
                <a href="../04/an-rpython-jit-for-lpegs-4779548053359386284.html" rel="next" title="An RPython JIT for LPegs">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                <div class="comment-level comment-level-1">
      <div class="comment comment-2892465627547709055">
        <div class="comment-header">
          <a name="comment-2892465627547709055"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2019-03-28 09:52</span>:
        </div>
        <div class="comment-content">
          <p>Hi,<br><br>I get this error when trying to run my app with the new PyPy release (pypy 2.7 syntax on Windows):<br><br>'C:\pypy2\lib_pypy\_sqlite3_cffi.pypy-41.pyd': The specified module could not be found<br><br><br>The file specified in the error message (\lib_pypy\_sqlite3_cffi.pypy-41.pyd) is in the folder so whatever is missing is not quite so obvious.</p>
        </div>
      </div>
      <div class="comment comment-1009946760597900994">
        <div class="comment-header">
          <a name="comment-1009946760597900994"></a>
            <span class="author">Noah F. San Tsorvutz</span> wrote on <span class="date">2019-03-29 14:27</span>:
        </div>
        <div class="comment-content">
          <p>One question about using utf8 text encoding, internally. <br><br>Is text handling code much different now, in PyPy, vs. cPython?<br><br>If handling characters ( code points ) within the ASCII range <br>is more like Python v.2.x, that would be very good news to <br>at least one old fart who is having trouble even treating <br>print as a function ...<br><br>Thanks!<br></p>
        </div>
      </div>
      <div class="comment comment-2992256973717075345">
        <div class="comment-header">
          <a name="comment-2992256973717075345"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2019-03-31 08:00</span>:
        </div>
        <div class="comment-content">
          <p>@Noah The answer is complicated because CPython changed its internals more than once.  The current CPython 3.x stores unicode strings as an array of same-sized characters; if your string contains even one character over 0xffff then it's an array of 4 bytes for all the characters.  Sometimes CPython *also* caches the UTF8 string, but doesn't use it much.  The new PyPy is very different: it uses the UTF8 string *only*, and it works for both PyPy 2.7 or 3.x.</p>
        </div>
      </div>
      <div class="comment comment-71276575228454634">
        <div class="comment-header">
          <a name="comment-71276575228454634"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2019-03-31 08:04</span>:
        </div>
        <div class="comment-content">
          <p>@Anonymous It works for me.  Please open a bug report on https://bugs.pypy.org and give more details...</p>
        </div>
      </div>
      <div class="comment comment-1757100720789328317">
        <div class="comment-header">
          <a name="comment-1757100720789328317"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2019-03-31 12:09</span>:
        </div>
        <div class="comment-content">
          <p>Hi Armin,<br><br>I can't log in to bugs.pypy.org but the problem is very easy to replicate, you only need to test this and it fails (v6.0.0 works fine but both v7.0.0 and 7.1.0 fail):<br><br>try:<br>    import sqlite3<br>except Exception as e:<br>    print str(e)<br><br>The error is:<br>'C:\pypy27v710\lib_pypy\_sqlite3_cffi.pypy-41.pyd': The specified module could not be found<br><br>I've tested it on two different Win10 PCs (32bit PyPy on 64bit Win10) and both exhibit the same behaviour.<br></p>
        </div>
      </div>
      <div class="comment comment-9186629026282543935">
        <div class="comment-header">
          <a name="comment-9186629026282543935"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2019-03-31 16:29</span>:
        </div>
        <div class="comment-content">
          <p>It is not so easy, because it works fine for me (win10 too). Please file a regular bug report. If you can't then we have another problem to solve first...</p>
        </div>
      </div>
      <div class="comment comment-1438451039904895078">
        <div class="comment-header">
          <a name="comment-1438451039904895078"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2019-03-31 18:06</span>:
        </div>
        <div class="comment-content">
          <p>Hi Armin,<br><br>I've got the answer: With PyPy version &gt;= 7.0.0 you have to add PyPy's root folder to PATH in Environment Variables, that wasn't required with versions &lt;= 6.0.0</p>
        </div>
      </div>
      <div class="comment comment-3304130718023464526">
        <div class="comment-header">
          <a name="comment-3304130718023464526"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2019-04-01 08:15</span>:
        </div>
        <div class="comment-content">
          <p>https://foss.heptapod.net/pypy/pypy/-/issues/2988/windows-cant-find-_sqlite3_cffipypy-41pyd</p>
        </div>
      </div>
      <div class="comment comment-4421260900536150875">
        <div class="comment-header">
          <a name="comment-4421260900536150875"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2019-04-02 19:10</span>:
        </div>
        <div class="comment-content">
          <p>Hi Armin,<br><br>Moving the dlls to lib_pypy is a nice easy workaround, thank you.<br><br>And thanks to everybody in the PyPy team for their excellent work.</p>
        </div>
      </div>
         </div>

          </section>
</div>
    <div class="sidebar">
<div>
  <h2>
    The PyPy blogposts
  </h2>
  <div>
    Create a guest post via a PR to the <a href="https://github.com/pypy/pypy.org">source repo</a>
  </div>
</div>
    <div id="global-recent-posts">
    <h2>
      Recent Posts
    </h2>
    <ul class="post-list">
      <li>
        <a href="/posts/2025/07/pypy-v7320-release.html" class="listtitle">PyPy v7.3.20 release</a>
      </li>
      <li>
        <a href="/posts/2025/06/rpython-gc-allocation-speed.html" class="listtitle">How fast can the RPython GC allocate?</a>
      </li>
      <li>
        <a href="/posts/2025/04/prospero-in-rpython.html" class="listtitle">Doing the Prospero-Challenge in RPython</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-v7319-release.html" class="listtitle">PyPy v7.3.19 release</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-gc-sampling.html" class="listtitle">Low Overhead Allocation Sampling with VMProf in PyPy's GC</a>
      </li>
      <li>
        <a href="/posts/2025/02/pypy-v7318-release.html" class="listtitle">PyPy v7.3.18 release</a>
      </li>
      <li>
        <a href="/posts/2025/01/musings-tracing.html" class="listtitle">Musings on Tracing in PyPy</a>
      </li>
      <li>
        <a href="/posts/2025/01/towards-pypy311-an-update.html" class="listtitle">Towards PyPy3.11 - an update</a>
      </li>
      <li>
        <a href="/posts/2024/11/guest-post-final-encoding-in-rpython.html" class="listtitle">Guest Post: Final Encoding in RPython Interpreters</a>
      </li>
      <li>
        <a href="/posts/2024/10/jit-peephole-dsl.html" class="listtitle">A DSL for Peephole Transformation Rules of Integer Operations in the PyPy JIT</a>
      </li>
    </ul>
  </div>

          <div id="global-archive-list">
          <h2>
            Archives
          </h2>
          <ul class="archive-level archive-level-1">
            <li><a class="reference" href="/2007/">2007</a> (19)
            </li>
            <li><a class="reference" href="/2008/">2008</a> (62)
            </li>
            <li><a class="reference" href="/2009/">2009</a> (38)
            </li>
            <li><a class="reference" href="/2010/">2010</a> (44)
            </li>
            <li><a class="reference" href="/2011/">2011</a> (43)
            </li>
            <li><a class="reference" href="/2012/">2012</a> (44)
            </li>
            <li><a class="reference" href="/2013/">2013</a> (46)
            </li>
            <li><a class="reference" href="/2014/">2014</a> (22)
            </li>
            <li><a class="reference" href="/2015/">2015</a> (20)
            </li>
            <li><a class="reference" href="/2016/">2016</a> (20)
            </li>
            <li><a class="reference" href="/2017/">2017</a> (13)
            </li>
            <li><a class="reference" href="/2018/">2018</a> (12)
            </li>
            <li><a class="reference" href="/2019/">2019</a> (12)
            </li>
            <li><a class="reference" href="/2020/">2020</a> (9)
            </li>
            <li><a class="reference" href="/2021/">2021</a> (10)
            </li>
            <li><a class="reference" href="/2022/">2022</a> (13)
            </li>
            <li><a class="reference" href="/2023/">2023</a> (6)
            </li>
            <li><a class="reference" href="/2024/">2024</a> (13)
            </li>
            <li><a class="reference" href="/2025/">2025</a> (8)
            </li>
          </ul>
        </div>


          <div id="global-tag-list">
          <h2>
            Tags
          </h2>
          <ul>
            <li><a class="reference" href="/categories/arm.html">arm</a> (2)</li>
            <li><a class="reference" href="/categories/benchmarking.html">benchmarking</a> (1)</li>
            <li><a class="reference" href="/categories/casestudy.html">casestudy</a> (3)</li>
            <li><a class="reference" href="/categories/cli.html">cli</a> (1)</li>
            <li><a class="reference" href="/categories/compiler.html">compiler</a> (1)</li>
            <li><a class="reference" href="/categories/conda-forge.html">conda-forge</a> (1)</li>
            <li><a class="reference" href="/categories/cpyext.html">cpyext</a> (4)</li>
            <li><a class="reference" href="/categories/cpython.html">CPython</a> (3)</li>
            <li><a class="reference" href="/categories/ep2008.html">ep2008</a> (1)</li>
            <li><a class="reference" href="/categories/extension-modules.html">extension modules</a> (3)</li>
            <li><a class="reference" href="/categories/gc.html">gc</a> (3)</li>
            <li><a class="reference" href="/categories/guestpost.html">guestpost</a> (3)</li>
            <li><a class="reference" href="/categories/graalpython.html">GraalPython</a> (1)</li>
            <li><a class="reference" href="/categories/hpy.html">hpy</a> (1)</li>
            <li><a class="reference" href="/categories/heptapod.html">Heptapod</a> (1)</li>
            <li><a class="reference" href="/categories/jit.html">jit</a> (23)</li>
            <li><a class="reference" href="/categories/jython.html">jython</a> (1)</li>
            <li><a class="reference" href="/categories/kcachegrind.html">kcachegrind</a> (1)</li>
            <li><a class="reference" href="/categories/meta.html">meta</a> (1)</li>
            <li><a class="reference" href="/categories/numpy.html">numpy</a> (24)</li>
            <li><a class="reference" href="/categories/parser.html">parser</a> (1)</li>
            <li><a class="reference" href="/categories/performance.html">performance</a> (2)</li>
            <li><a class="reference" href="/categories/profiling.html">profiling</a> (7)</li>
            <li><a class="reference" href="/categories/pypy.html">pypy</a> (6)</li>
            <li><a class="reference" href="/categories/pypy3.html">pypy3</a> (16)</li>
            <li><a class="reference" href="/categories/pyqt4.html">PyQt4</a> (1)</li>
            <li><a class="reference" href="/categories/release.html">release</a> (66)</li>
            <li><a class="reference" href="/categories/releasecffi.html">releasecffi</a> (3)</li>
            <li><a class="reference" href="/categories/releaserevdb.html">releaserevdb</a> (1)</li>
            <li><a class="reference" href="/categories/releasestm.html">releasestm</a> (1)</li>
            <li><a class="reference" href="/categories/revdb.html">revdb</a> (1)</li>
            <li><a class="reference" href="/categories/roadmap.html">roadmap</a> (2)</li>
            <li><a class="reference" href="/categories/rpython.html">rpython</a> (1)</li>
            <li><a class="reference" href="/categories/rpyc.html">RPyC</a> (1)</li>
            <li><a class="reference" href="/categories/speed.html">speed</a> (6)</li>
            <li><a class="reference" href="/categories/sponsors.html">sponsors</a> (7)</li>
            <li><a class="reference" href="/categories/sprint.html">sprint</a> (3)</li>
            <li><a class="reference" href="/categories/sprints.html">sprints</a> (1)</li>
            <li><a class="reference" href="/categories/stm.html">stm</a> (14)</li>
            <li><a class="reference" href="/categories/sun.html">sun</a> (1)</li>
            <li><a class="reference" href="/categories/smalltalk.html">Smalltalk</a> (1)</li>
            <li><a class="reference" href="/categories/squeak.html">Squeak</a> (1)</li>
            <li><a class="reference" href="/categories/testing.html">testing</a> (1)</li>
            <li><a class="reference" href="/categories/toy-optimizer.html">toy-optimizer</a> (5)</li>
            <li><a class="reference" href="/categories/unicode.html">unicode</a> (1)</li>
            <li><a class="reference" href="/categories/valgrind.html">valgrind</a> (1)</li>
            <li><a class="reference" href="/categories/vmprof.html">vmprof</a> (3)</li>
            <li><a class="reference" href="/categories/z3.html">z3</a> (5)</li>
          </ul>
        </div>    </div>
</article></main><footer id="footer"><p>
</p>
<div class="myfooter">
  <div class="logotext">
    © 2025 <a href="mailto:pypy-dev@pypy.org">The PyPy Team</a>
     
    Built with <a href="https://getnikola.com" rel="nofollow">Nikola</a>
     
    Last built 2025-07-07T11:01
  </div>
  <div style="margin-left: auto">
  <a href="../../../rss.xml">RSS feed</a>
</div>

            
        

    </div>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" crossorigin="anonymous"></script><script src="../../../assets/js/styles.js"></script></footer>
</div>
</body>
</html>